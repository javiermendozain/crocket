theme.StickyHeader=function(){function t(){}t.prototype=$.extend({},t.prototype,{init:function(t,i){t.attr("data-sticky-effect")||1;if(t.length){var e={_create:function(){function t(){o._fix(o.$sticky,o.$spacer),o._move(o.options[o.bp])}function i(){o._unfix(o.$sticky,o.$spacer),o._return(o.options[o.bp])}function e(){var t=theme.current.is_desktop;o.bp=t?"desktop":"mobile",o.$sticky=t?a:c,o.$spacer=t?h:r,o.$sticky.length&&(t?(r.removeClass("header__spacer--visible"),h.addClass("header__spacer--visible"),c.hasClass(o.sticky_class)&&(o._unfix(c,r),o._return(o.options.mobile))):(h.removeClass("header__spacer--visible"),r.addClass("header__spacer--visible"),a.hasClass(o.sticky_class)&&(o._unfix(a,h),o._return(o.options.desktop))))}function s(){if(o.$sticky.length){var e=o.options[o.bp].limit?o.options[o.bp].limit:0,s=o.$spacer[0].getBoundingClientRect();"bottom"===e&&(e=o.$sticky.hasClass(o.sticky_class)?o.$spacer.innerHeight():o.$sticky.innerHeight()),e*=-1,s.top<e?(o.$sticky.hasClass(o.sticky_class)||t(),ie||o._check_height(o.$sticky,o.options[o.bp])):o.$sticky.hasClass(o.sticky_class)&&i()}}var o=this,n=this.bindings,c=n.find(this.options.mobile&&this.options.mobile.sticky?this.options.mobile.sticky:""),a=n.find(this.options.desktop&&this.options.desktop.sticky?this.options.desktop.sticky:""),r=$("<div>").addClass("header__spacer header__spacer--m").insertBefore(c),h=$("<div>").addClass("header__spacer header__spacer--d").insertBefore(a);this.sticky_class="header__content--sticky",e(),s(),$window.on({"theme.resize.stickyHeader":function(){e(),s()},"scroll.stickyHeader":s})},_fix:function(t,i){var e=t.innerHeight();i.height(e),this.options[this.bp].fade&&t.css({opacity:0}).velocity({opacity:theme.animations.sticky_header.opacity},this.options[this.bp].duration()),t.addClass(this.sticky_class)},_unfix:function(t,i){i.removeAttr("style"),this.options[this.bp].fade&&t.velocity("stop",!0),t.removeAttr("style").removeClass(this.sticky_class)},_move:function(t){t.move&&$.each(t.move,function(){var t=$(this.elem),i=$(this.to),e=this.method||"append";this.$elem=t,this.$parent=t.parent(),i[e](t)})},_return:function(t){t.move&&$.each(t.move,function(){var t=this.method||"append";this.$parent[t](this.$elem),this.$elem=null,this.$parent=null})},_check_height:function(t,i){if(i.height){var e=this.$spacer[0].getBoundingClientRect(),s=e.bottom<=i.height?i.height:e.bottom;t.css({"min-height":s})}},getStickyHeight:function(){return this.options[this.bp]?this.options[this.bp].height||$(this.options[this.bp].sticky).innerHeight():0},destroy:function(){$(window).unbind("resize.stickyHeader scroll.stickyHeader"),$.Widget.prototype.destroy.call(this)}};return $.widget("ui.stickyHeader",e),t.stickyHeader(i),this.$sticky=t,{destroy:function(){t.stickyHeader("destroy")}}}}}),theme.StickyHeader=new t},$(function(){theme.StickyHeader()});