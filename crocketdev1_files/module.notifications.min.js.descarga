theme.Notifications=function(){function t(){this.selectors={elems:".js-notification"},this.settings={close_limit:40,translate_limit:50,opacity_limit:.4},this.load()}t.prototype=$.extend({},t.prototype,{load:function(){var t,i=this;$body.on("mousedown",this.selectors.elems,function(n){if("A"!==n.target.tagName&&!$(n.target).parents("[data-js-action]").length){i.is_holded=!0;var e=$(this),o=n.screenX;return t=0,e.addClass("animate"),setTimeout(function(){e.addClass("pressed")},0),$body.on("mousemove.notification",function(n){var s=n.screenX,a=Math.min(o+i.settings.translate_limit,Math.max(o-i.settings.translate_limit,s));t=a-o,e.removeClass("animate"),setTimeout(function(){e.css({transform:"translateX("+t+"px) scale(0.95)",opacity:Math.max((i.settings.translate_limit-Math.abs(t))/i.settings.translate_limit,i.settings.opacity_limit)})},0),setTimeout(function(){e.addClass("animate")},0)}),$body.one("mouseup.notification",function(){e.trigger("mouseup")}),n.preventDefault(),!1}}),$body.on("mouseup",this.selectors.elems,function(){var n=$(this);i.is_holded=!1,$body.unbind("mousemove.notification mouseup.notification"),setTimeout(function(){if(Math.abs(t)>i.settings.close_limit){var e=n.find("[data-js-notification-inner]"),o=e.find('[data-js-action="close"]').first();if(e.hasClass("d-none"))return;n.one("transitionend",function(){t=0,n.trigger("mouseup").trigger("transitionend"),o.trigger("click"),e.trigger("transitionend"),n.trigger("onpressedend")}),n.css({transform:"translateX("+(t+20)+"px) scale(0.95)",opacity:0})}else n.removeClass("pressed"),n.one("transitionend",function(){n.removeClass("animate"),n.trigger("onpressedend")}),n.css({transform:"",opacity:""});"0s"===n.css("transition-duration")&&n.trigger("transitionend")},0)}),$body.on("close",this.selectors.elems,function(){var t=$(this);$body.unbind("mousemove.notification"),t.trigger("mouseup").trigger("transitionend")})},_cookies:function(t){var i=this,n=t.find(".js-notification-cookies");if(n.length){var e=n.find('[data-js-action="close"]'),o=$.cookie("notification-cookies"),s=n.attr("data-js-show-once"),a=+n.attr("data-js-delay"),r=+n.attr("data-js-cookies-life");return"off"!==o&&setTimeout(function(){i._show(n,function(){e.one("click",function(){if("true"===s){var t=new Date,e=864e5*r;t.setTime(t.getTime()+e),$.cookie("notification-cookies","off",{expires:t,path:"/"})}i._hide(n,function(){n.remove()}),$(this).off()})})},1e3*a),e}},_products:function(t){function i(t,i){return Math.round(t-.5+Math.random()*(i-t+1))}function n(){o._hide(s,function(){e()})}function e(){clearInterval(c),!s.hasClass("d-none")||o.is_holded?o.is_holded?s.parents(".js-notification").one("onpressedend",function(){n()}):s.is(":hover")?s.one("mouseleave",function(){n()}):n():(a=f.eq(i(0,f.length-1)),r=i(l,m),f.addClass("d-none"),a.removeClass("d-none"),o._show(s,function(){setTimeout(function(){e()},1e3*r),0!==h&&(c=setTimeout(function(){o._hide(s)},1e3*h))},function(t){t()}))}var o=this,s=t.find(".js-notification-products");if(s.length){var a,r,c,d=s.find('[data-js-action="close"]'),f=s.find("[data-js-notification-products-item]"),u=+s.attr("data-js-delay"),l=+s.attr("data-js-interval-min"),m=+s.attr("data-js-interval-max"),h=+s.attr("data-js-max-time-life");return setTimeout(function(){e()},1e3*u),d.on("click",function(){o._hide(s)}),d}},_show:function(t,i,n){function e(){setTimeout(function(){t.addClass("visible")},0),"0s"===t.css("transition-duration")&&t.trigger("transitionend")}t.unbind("transitionend"),i&&t.one("transitionend",function(){i()}),t.removeClass("d-none"),t.addClass("animate"),n?n(e):e()},_hide:function(t,i){t.unbind("transitionend"),t.one("transitionend",function(){t.addClass("d-none").removeClass("animate").removeAttr("style"),t.parents(".js-notification").trigger("close"),i&&i()}),t.removeClass("visible"),"0s"===t.css("transition-duration")&&t.trigger("transitionend")},init:function(t){this._products(t),this._cookies(t)},destroy:function(t){t.find(".js-notification-cookies, .js-notification-products").find('[data-js-action="close"]').off()}}),theme.Notifications=new t},$(function(){theme.Notifications()});